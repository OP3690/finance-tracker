"use strict";(()=>{var t={};t.id=866,t.ids=[866],t.modules={53524:t=>{t.exports=require("@prisma/client")},30517:t=>{t.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},71617:(t,e,a)=>{a.r(e),a.d(e,{headerHooks:()=>w,originalPathname:()=>b,patchFetch:()=>D,requestAsyncStorage:()=>y,routeModule:()=>f,serverHooks:()=>j,staticGenerationAsyncStorage:()=>g,staticGenerationBailout:()=>F});var r={};a.r(r),a.d(r,{DELETE:()=>h,GET:()=>d,POST:()=>p,PUT:()=>m});var n=a(95419),o=a(69108),s=a(99678),i=a(78070),c=a(53524);let u=globalThis.prisma??new c.PrismaClient;function l(t){let e=Object.prototype.toString.call(t);return t instanceof Date||"object"==typeof t&&"[object Date]"===e?new t.constructor(+t):new Date("number"==typeof t||"[object Number]"===e||"string"==typeof t||"[object String]"===e?t:NaN)}async function d(t){try{let{searchParams:e}=new URL(t.url),a=e.get("month"),r={};if(a){let t=new Date(a);r={date:{gte:function(t){let e=l(t);return e.setDate(1),e.setHours(0,0,0,0),e}(t),lte:function(t){let e=l(t),a=e.getMonth();return e.setFullYear(e.getFullYear(),a+1,0),e.setHours(23,59,59,999),e}(t)}}}let n=await u.transaction.findMany({where:r,orderBy:{date:"desc"}});return i.Z.json(n)}catch(t){return console.error("Failed to fetch transactions:",t),i.Z.json({error:"Failed to fetch transactions"},{status:500})}}async function p(t){try{let e=await t.json(),a=await u.transaction.create({data:{date:new Date(e.date),category:e.category,description:e.description,amount:parseFloat(e.amount),comment:e.comment||""}});return i.Z.json(a)}catch(t){return console.error("Failed to create transaction:",t),i.Z.json({error:"Failed to create transaction"},{status:500})}}async function m(t){try{let e=await t.json(),a=await u.transaction.update({where:{id:e.id},data:{date:new Date(e.date),category:e.category,description:e.description,amount:parseFloat(e.amount),comment:e.comment||""}});return i.Z.json(a)}catch(t){return console.error("Failed to update transaction:",t),i.Z.json({error:"Failed to update transaction"},{status:500})}}async function h(t){try{let{searchParams:e}=new URL(t.url),a=e.get("id");if(!a)return i.Z.json({error:"Transaction ID is required"},{status:400});return await u.transaction.delete({where:{id:a}}),i.Z.json({success:!0})}catch(t){return console.error("Failed to delete transaction:",t),i.Z.json({error:"Failed to delete transaction"},{status:500})}}let f=new n.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/transactions/route",pathname:"/api/transactions",filename:"route",bundlePath:"app/api/transactions/route"},resolvedPagePath:"/Users/omprakashutaha/Desktop/finance-tracker/app/api/transactions/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:y,staticGenerationAsyncStorage:g,serverHooks:j,headerHooks:w,staticGenerationBailout:F}=f,b="/api/transactions/route";function D(){return(0,s.patchFetch)({serverHooks:j,staticGenerationAsyncStorage:g})}}};var e=require("../../../webpack-runtime.js");e.C(t);var a=t=>e(e.s=t),r=e.X(0,[638,206],()=>a(71617));module.exports=r})();